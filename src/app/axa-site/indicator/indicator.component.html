<div class="header" *ngIf="hasComparisonModeEnabled()">
  <span class="firstCountryName">
    <span *ngIf="getFirstCountryName() !== false">{{ getFirstCountryName() }}</span>
  </span>

  <span *ngIf="!isComparisonGoingOn()" class="secondCharacter">Compare
    <span
      draggable
      (onDragStart)="onDragStart($event)"
      (onDragEnd)="onDragEnd($event)" class="icon"></span>
  </span>

  <span class="secondCountryName" *ngIf="isComparisonGoingOn()">
    <span *ngIf="getSecondCountryName() !== false">{{ getSecondCountryName() }}</span>
  </span>
</div>
<div class="content">
  <ul class="indicatorsList">
    <li *ngFor="let indicator of indicators; let i= index;" class="active" id="indicator_{{i}}">
      <div class="title" (click)="toggleIndicator($event)">
        <span class="catIcon" [ngStyle]="getIndicatorIcon(indicator)"></span>
        {{ indicator.title }}
        <span class="totalKpis">{{ indicator.kpis.length }} KPIs</span>
      </div>

      <ul class="kpisList">
        <li *ngFor="let kpi of indicator.kpis; let i= index;">

          <div class="kpiTitle">
            <div class="titleWrapper"><span>{{ i + 1 }}.</span> {{ kpi.title }}</div>
            <div class="actions" routerLink="/map/{{ kpi.id }}">
              <div class="worldIcon tooltipContainer">
                <div class="tooltipMessage">View global data</div>
              </div>
              <div class="flagIcon"></div>
            </div>
          </div>

          <div class="singleMode"
            *ngIf="getFirstCountryName() !== false && getSecondCountryName() === false"
          >
            <div class="noValue" *ngIf="!kpi.firstCountryValue">No value</div>
            <div class="value" *ngIf="kpi.firstCountryValue && kpi.unit === '%'">{{ kpi.firstCountryValue | number }} {{ kpi.unit }}</div>
            <div class="value" *ngIf="kpi.firstCountryValue && (kpi.unit === 'EUR' || kpi.unit === 'USD')">{{ kpi.firstCountryValue | currency:kpi.unit:true }}</div>
            <div class="value" *ngIf="kpi.firstCountryValue && kpi.unit === ''">{{ kpi.firstCountryValue | number }}</div>
          </div>

          <div class="comparisonMode"
            *ngIf="isComparisonGoingOn()"
          >

            <div class="barWrapper firstCountryData" *ngIf="getFirstCountryName() !== false">

              <div class="dataWrapper">
                <div class="countryName">{{ getFirstCountryName() }}</div>

                <div class="value" *ngIf="!kpi.firstCountryValue">No value</div>
                <div class="value" *ngIf="kpi.firstCountryValue && kpi.unit === '%'">{{ kpi.firstCountryValue | number }} {{ kpi.unit }}</div>
                <div class="value" *ngIf="kpi.firstCountryValue && (kpi.unit === 'EUR' || kpi.unit === 'USD')">{{ kpi.firstCountryValue | currency:kpi.unit:true }}</div>
                <div class="value" *ngIf="kpi.firstCountryValue && kpi.unit === ''">{{ kpi.firstCountryValue | number }}</div>

              </div>
              <div class="barFigure"><span class="barFill red" [ngStyle]="getFillBar(kpi.firstCountryValue, kpi.secondCountryValue, kpi.unit)"></span></div>
            </div>

            <div class="barWrapper secondCountryData" *ngIf="getSecondCountryName() !== false">

              <div class="dataWrapper">
                <div class="countryName">{{ getSecondCountryName() }}</div>

                <div class="value" *ngIf="!kpi.secondCountryValue">No value</div>
                <div class="value" *ngIf="kpi.secondCountryValue && kpi.unit === '%'">{{ kpi.secondCountryValue | number }} {{ kpi.unit }}</div>
                <div class="value" *ngIf="kpi.secondCountryValue && (kpi.unit === 'EUR' || kpi.unit === 'USD')">{{ kpi.secondCountryValue | currency:kpi.unit:true }}</div>
                <div class="value" *ngIf="kpi.secondCountryValue && kpi.unit === ''">{{ kpi.secondCountryValue | number }}</div>

              </div>

              <div class="barFigure">
                <span class="barFill blue" [ngStyle]="getFillBar(kpi.secondCountryValue, kpi.firstCountryValue, kpi.unit)"></span>
              </div>
            </div>
          </div>

          <div class="placeholder">
            <span>{{ kpi.unitText }}</span>
            <span class="infoIcon"></span>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</div>
